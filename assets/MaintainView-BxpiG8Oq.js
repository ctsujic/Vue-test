import{_ as f,r as i,o as E,a,b as t,d as _,n as m,F as h,f as k,g as S,h as u,t as s}from"./index-tvMXVzfh.js";const M={class:"maintain-view"},T={class:"nav nav-tabs"},g={class:"nav-item"},$={class:"nav-item"},w={class:"nav-item"},P={key:0},I={class:"table mt-3"},O={key:1},A={class:"table mt-3"},B={key:2},D={class:"table mt-3"},V={__name:"MaintainView",setup(x){const o=i("product"),C=i([]),b=i([]),y=i([]),d=e=>{o.value=e,c(e)},c=async e=>{try{let n="";switch(e){case"product":n="/products";break;case"customer":n="/customers";break;case"supplier":n="/suppliers";break}const l=await S.get(n);e==="product"?C.value=l.data:e==="customer"?b.value=l.data:e==="supplier"&&(y.value=l.data)}catch(n){console.error("資料獲取失敗：",n)}},p=async e=>{var n,l;try{const r={product:"/products/update-product-stats",customer:"/customers/update-sales-stats",supplier:"/suppliers/update-purchase-stats"};if(!r[e])throw new Error("無效的操作类型");const v=await S.post(r[e]);console.log("更新结果:",v.data),alert(`${N(e)} 更新成功！`),c(e)}catch(r){console.error("更新失败:",r);const v=((l=(n=r.response)==null?void 0:n.data)==null?void 0:l.message)||r.message;alert(`${N(e)} 更新失败：${v}`)}},N=e=>({product:"產品管理",customer:"客戶管理",supplier:"廠商管理"})[e]||"未知操作";return E(()=>{c(o.value)}),(e,n)=>(u(),a("div",M,[n[9]||(n[9]=t("h2",null,"系統維護",-1)),t("ul",T,[t("li",g,[t("a",{class:m(["nav-link",{active:o.value==="product"}]),onClick:n[0]||(n[0]=l=>d("product"))},"產品管理",2)]),t("li",$,[t("a",{class:m(["nav-link",{active:o.value==="customer"}]),onClick:n[1]||(n[1]=l=>d("customer"))},"客戶管理",2)]),t("li",w,[t("a",{class:m(["nav-link",{active:o.value==="supplier"}]),onClick:n[2]||(n[2]=l=>d("supplier"))},"廠商管理",2)])]),o.value==="product"?(u(),a("div",P,[t("button",{class:"btn btn-primary mt-3",onClick:n[3]||(n[3]=l=>p("product"))},"檢查並更新"),t("table",I,[n[6]||(n[6]=t("thead",null,[t("tr",null,[t("th",null,"條碼"),t("th",null,"書名"),t("th",null,"定價"),t("th",null,"平均成本"),t("th",null,"庫存"),t("th",null,"庫存額"),t("th",null,"銷量")])],-1)),t("tbody",null,[(u(!0),a(h,null,k(C.value,l=>(u(),a("tr",{key:l.id},[t("td",null,s(l.P_NS),1),t("td",null,s(l.P_NAME),1),t("td",null,s(l.P_PRICE),1),t("td",null,s(l.P_COST),1),t("td",null,s(l.P_STOCK),1),t("td",null,s(l.P_INVENTORY),1),t("td",null,s(l.P_SALESTOTAL),1)]))),128))])])])):_("",!0),o.value==="customer"?(u(),a("div",O,[t("button",{class:"btn btn-primary mt-3",onClick:n[4]||(n[4]=l=>p("customer"))},"檢查並更新"),t("table",A,[n[7]||(n[7]=t("thead",null,[t("tr",null,[t("th",null,"編號"),t("th",null,"帳號"),t("th",null,"下單次數"),t("th",null,"總金額"),t("th",null,"預設折扣"),t("th",null,"金流費"),t("th",null,"成交費")])],-1)),t("tbody",null,[(u(!0),a(h,null,k(b.value,l=>(u(),a("tr",{key:l.id},[t("td",null,s(l.C_ID),1),t("td",null,s(l.C_NAME),1),t("td",null,s(l.C_NB),1),t("td",null,s(l.C_MONEY),1),t("td",null,s(l.C_DISCOUNT),1),t("td",null,s(l.C_CashFee),1),t("td",null,s(l.C_TransactionFee),1)]))),128))])])])):_("",!0),o.value==="supplier"?(u(),a("div",B,[t("button",{class:"btn btn-primary mt-3",onClick:n[5]||(n[5]=l=>p("supplier"))},"檢查並更新"),t("table",D,[n[8]||(n[8]=t("thead",null,[t("tr",null,[t("th",null,"編號"),t("th",null,"廠商名稱"),t("th",null,"訂購次數"),t("th",null,"總金額")])],-1)),t("tbody",null,[(u(!0),a(h,null,k(y.value,l=>(u(),a("tr",{key:l.id},[t("td",null,s(l.S_ID),1),t("td",null,s(l.S_NAME),1),t("td",null,s(l.S_NB),1),t("td",null,s(l.S_MONEY),1)]))),128))])])])):_("",!0)]))}},L=f(V,[["__scopeId","data-v-ea64eb84"]]);export{L as default};
