import{_ as b,r as c,o as f,a as l,b as n,w as k,v as h,k as y,F as I,f as P,g as x,l as g,h as d}from"./index-tvMXVzfh.js";const D={class:"input-group mb-3"},w=["disabled"],M={id:"productList"},B=["value","data-id"],E=["disabled"],N={__name:"ItemInput",props:{isDisabled:Boolean,source:{type:String,default:"sales",validator:s=>["sales","purchase","task","purchaseReturn"].includes(s)}},emits:["addProduct"],setup(s,{emit:v}){const r=s,a=c(""),i=c(null),u=c([]),m=v,p=async()=>{try{const t={};(r.source==="sales"||r.source==="purchaseReturn")&&(t.stock="true");const{data:e}=await x.get("/products",{params:t});u.value=e}catch(t){console.error("獲取產品資料失敗：",t)}},_=()=>{const t=u.value.find(e=>e.P_NAME===a.value);if(!t)if(r.source==="task")t={P_NAME:a.value};else{alert("請選擇有效的書籍");return}m("addProduct",t),a.value="",g(()=>{i.value.focus()})};return f(()=>{p()}),(t,e)=>(d(),l("div",D,[e[1]||(e[1]=n("span",{class:"input-group-text"},"書名",-1)),k(n("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),onFocus:p,list:"productList",disabled:s.isDisabled,ref_key:"bookInput",ref:i,onKeydown:y(_,["enter"])},null,40,w),[[h,a.value]]),n("datalist",M,[(d(!0),l(I,null,P(u.value,o=>(d(),l("option",{key:o.P_ID,value:o.P_NAME,"data-id":o.P_ID},null,8,B))),128))]),n("button",{type:"button",class:"btn btn-outline-primary",onClick:_,disabled:s.isDisabled}," 新增 ",8,E)]))}},F=b(N,[["__scopeId","data-v-39130416"]]);export{F as I};
