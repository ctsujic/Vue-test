import{j as E,r as _,a as n,h as e,b as t,i as A,w as k,v as f,g as b,o as $,d as g,t as d,F as v,f as w,e as x,q as h}from"./index-tvMXVzfh.js";const C={class:"card"},D={class:"card-body"},I={class:"row"},V={class:"col-md-6 mb-3"},B=Object.assign({name:"SupplierForm"},{__name:"SupplierForm",setup(y){const a=E(),i=_({S_NAME:""}),s=async()=>{try{await b.post("/suppliers",i.value),alert("新增廠商成功"),i.value={S_NAME:""},a.push("/supplier")}catch(u){console.error("新增廠商失敗：",u),alert("新增廠商失敗")}};return(u,o)=>(e(),n("div",C,[t("div",D,[o[3]||(o[3]=t("h3",{class:"card-title mb-4"},"新增廠商",-1)),t("form",{onSubmit:A(s,["prevent"])},[t("div",I,[t("div",V,[o[1]||(o[1]=t("label",{for:"S_NAME",class:"form-label"},"廠商名稱",-1)),k(t("input",{type:"text",class:"form-control",id:"S_NAME","onUpdate:modelValue":o[0]||(o[0]=p=>i.value.S_NAME=p),required:""},null,512),[[f,i.value.S_NAME]])])]),o[2]||(o[2]=t("div",{class:"text-end"},[t("button",{type:"submit",class:"btn btn-primary"},"儲存")],-1))],32)])]))}}),F={class:"card"},j={class:"card-body"},O={key:0,class:"alert alert-danger",role:"alert"},L={class:"table-responsive"},T={class:"table table-hover"},q={key:0},U=["onClick"],H=["onClick"],P=["onClick"],R=Object.assign({name:"SupplierList"},{__name:"SupplierList",setup(y){const a=_([]),i=_(null),s=_(null),u=_({S_NAME:""}),o=()=>{s.value=null,u.value={S_NAME:""}},p=l=>{s.value=l.S_ID,u.value={S_NAME:l.S_NAME}},N=async l=>{try{await b.PATCH(`/suppliers/${l}`,u.value),alert("更新成功"),s.value=null,S()}catch(r){console.error("更新客戶失敗：",r),alert("更新失敗")}},S=async()=>{try{const{data:l}=await b.get("/suppliers");a.value=l}catch(l){console.error("獲取廠商列表失敗：",l),i.value="獲取廠商資料失敗"}},M=async l=>{if(confirm("確定要刪除此廠商嗎？"))try{await b.delete(`/suppliers/${l}`),alert("刪除成功"),S()}catch(r){console.error("刪除廠商失敗：",r),alert("刪除失敗")}};return $(()=>{S()}),(l,r)=>(e(),n("div",F,[t("div",j,[i.value?(e(),n("div",O,d(i.value),1)):g("",!0),t("div",L,[t("table",T,[r[2]||(r[2]=t("thead",null,[t("tr",null,[t("th",null,"編號"),t("th",null,"廠商名稱"),t("th",null,"訂購次數"),t("th",null,"總金額"),t("th",null,"操作")])],-1)),t("tbody",null,[a.value.length===0?(e(),n("tr",q,r[1]||(r[1]=[t("td",{colspan:"8",class:"text-center"},"暫無資料",-1)]))):(e(!0),n(v,{key:1},w(a.value,c=>(e(),n("tr",{key:c.id},[t("td",null,d(c.S_ID),1),t("td",null,[s.value===c.S_ID?k((e(),n("input",{key:0,type:"text",class:"form-control form-control-sm","onUpdate:modelValue":r[0]||(r[0]=m=>u.value.S_NAME=m)},null,512)),[[f,u.value.S_NAME]]):(e(),n(v,{key:1},[x(d(c.S_NAME),1)],64))]),t("td",null,d(c.S_NB),1),t("td",null,d(c.S_MONEY),1),t("td",null,[s.value===c.S_ID?(e(),n(v,{key:0},[t("button",{class:"btn btn-sm btn-success me-2",onClick:m=>N(c.S_ID)}," 完成 ",8,U),t("button",{class:"btn btn-sm btn-secondary me-2",onClick:o},"取消")],64)):(e(),n(v,{key:1},[t("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:m=>p(c)}," 編輯 ",8,H),t("button",{class:"btn btn-sm btn-outline-danger",onClick:m=>M(c.S_ID)}," 刪除 ",8,P)],64))])]))),128))])])])])]))}}),Y={class:"row mb-4"},z={class:"col text-end"},J=Object.assign({name:"SupplierView"},{__name:"SupplierView",setup(y){const a=_(!1);return(i,s)=>(e(),n(v,null,[t("div",Y,[s[1]||(s[1]=t("div",{class:"col"},[t("h2",null,"廠商管理")],-1)),t("div",z,[t("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=u=>a.value=!a.value)},d(a.value?"返回列表":"新增廠商"),1)])]),a.value?(e(),h(B,{key:0})):(e(),h(R,{key:1}))],64))}});export{J as default};
